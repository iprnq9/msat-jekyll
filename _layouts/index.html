---
# Derive this layout from the default layout.
# The content found below this Front Matter will be inserted on the default layout where it says {% content %}.
layout: default
---


{% if page.show_parallax contains 'True' %}
<div class="parallax-container">
    <div class="caption center-align">
        <h3 class="white-text">Satellites are like Buzz Lightyear</h3>
        <h5 class="light grey-text text-lighten-3">They fall with style.</h5>
    </div>
    <div class="parallax">
        <img src="{{ site.baseurl }}{{page.parallax_image}}"/>
    </div>
</div>
{% endif %}

<script>
    $(document).ready(function () {
        $('.parallax').parallax();
    });

</script>

<div class="container">
    <h3 class="white-text">Ongoing Projects</h3>
    <div class="row margin-top flex-height">
        {% for project in site.data.msat-projects %}
        {% if project.ongoing %}
        <div class="col s12 l4 flex-item flex-height">
            <a href="{{ site.baseurl }}projects/{{project.url}}.html">
                <div class="card-panel tile hoverable z-depth-1 h200 flex-item">
                    <div class="tile-image-large">
                        <img src="{{ site.baseurl }}{{project.tile_image}}"/>
                    </div>
                    <div class="tile-content">
                        <div class="tile-title">{{ project.title }}</div>
                        <div class="tile-description">{{ project.tagline }}</div>
                    </div>
                </div>
            </a>
        </div>
        {% endif %}
        {% endfor %}
    </div>
    <div class="row margin-top card-panel white">
        {{content}}
    </div>
    <div class="row margin-top calendar-events">
        <h3 class="center-align white-text">Here's What's Up Next:</h3>
    </div>
</div>

<script>

</script>

<script>
    // Hide parallax on Firefox because it freaks out unfortunately
    // Javascript
    var FIREFOX = /Firefox/i.test(navigator.userAgent);

    if (FIREFOX) {
        $('.parallax-container').addClass('hid');
    }
</script>

<script src="{{site.baseurl}}js/moment.min.js"></script>

<script>
    var api_key = "AIzaSyBMWU0hcTVS9492xkBcyvIfK6fblhiFhMc";
    var calendar_id = "mst.edu_jf6ajjf63sjl899fm9sq18pkl8@group.calendar.google.com";
    //var calendar_id = "mst.edu_7277l0hsh2n59llhc2uldqnm3k@group.calendar.google.com";
    var num_events = 2;
    var d = new Date();
    var date = d.toISOString();
    //console.log(date);
    var url = "https://www.googleapis.com/calendar/v3/calendars/" + calendar_id + "/events?key=" + api_key + "&singleEvents=True&orderBy=startTime&showDeleted=False&maxResults=" + num_events + "&timeMin=" + date;
    $.getJSON(url, function (json) {
        //console.log(json.items[0].summary);
        var events = json.items;
        $(events).each(function (index) {
            console.log(events[index].summary);
            var title = events[index].summary;
            var location = events[index].location;
            if (location == undefined) {
                location = "Probably in Toomey"
            }
            var link = events[index].htmlLink;
            var options = {weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'};
            var start_date = new Date(events[index].start.dateTime).toLocaleDateString('en-US', options);
            var start_time = new Date(events[index].start.dateTime).toLocaleTimeString(navigator.language, {
                hour: '2-digit',
                minute: '2-digit'
            });
            ;

            console.log(start_date);
            console.log(start_time);
            var html_string = "<div class=\"col s12 l6\"><div class=\"card horizontal\"><div class=\"card-image fill blue darken-4\"></div><div class=\"card-stacked\"><div class=\"card-content\"><h4>" + title + "</h4><blockquote><h6>" + start_date + "</h6><h6>" + start_time + "</h6><h6>" + location + "</h6><a target=\"_blank\" href=\"" + link + "\" class=\"btn-floating btn-large waves-effect right-align waves-light green margin float-right\"><i class=\"material-icons\">today</i></a></blockquote>" + "</div></div></div></div>"
            $('.calendar-events').append(html_string);
        });
    });
</script>